# Apix: 프로젝트 마스터 플랜 (PRD 및 기술 사양서)

**버전:** 1.0.0
**날짜:** 2026-01-20
**상태:** 초안 (DRAFT)
**타겟 인프라:** Avalanche L1 블록체인

---

## 1. Executive Summary (경영 요약)

**비전: "호출당 지불(Pay-per-Call)" 경제**
디지털 경제는 인간 중심의 월간 구독(SaaS) 모델에서 기계 중심의 온디맨드 상호작용으로 전환되고 있습니다. 새로운 경제 주체인 AI 에이전트는 신용카드나 정기 계약의 마찰 없이 데이터와 유틸리티에 즉시, 그리고 허가 없이 접근할 수 있어야 합니다.

**솔루션: Apix**
**Apix**는 이러한 마이크로페이먼트 시대를 위해 설계된 탈중앙화 API 마켓플레이스입니다. **Avalanche L1 블록체인**에서 API 호출을 토큰화함으로써, Apix는 진정한 "호출당 지불" 모델을 실현합니다.
*   **세분화된 접근(Granular Access):** 약정 없이 1회 호출부터 100만 회 호출까지 필요한 만큼만 정확히 구매할 수 있습니다.
*   **자율 상거래(Autonomous Commerce):** AI 에이전트는 **x402 프로토콜**(HTTP 402에서 영감)을 사용하여 프로그래매틱하게 API를 검색, 협상 및 구매할 수 있습니다.
*   **2차 유동성(Secondary Liquidity):** 벌크로 구매한 API 토큰을 재판매할 수 있는 시장을 제공하여 동적 가격 책정과 효율성을 창출합니다.

**가치 제안:**
*   **판매자:** 즉각적인 정산, 글로벌 도달, 급성장하는 AI 에이전트 경제에 대한 직접적인 접근.
*   **구매자(인간 및 AI):** 제로 마찰, 무한한 세분성, 자동화된 구매 프로세스.

---

## 2. User Experience (UX) Strategy (사용자 경험 전략)

### 2.1 사용자 여정: 개발자 (판매자)
**목표:** 마찰 없이 고가치 API를 수익화합니다.

1.  **온보딩:** Avalanche 지갑(Core/MetaMask)을 Apix 대시보드에 연결합니다.
2.  **리스팅(등록):**
    *   API 기본 URL 및 OpenAPI(Swagger) 명세를 입력합니다.
    *   **경제 설정:** 호출당 가격(예: 0.01 AVAX) 및 "벌크 티어"(예: 1,000회 호출에 8 AVAX)를 설정합니다.
    *   **AI 최적화:** AI 인덱싱을 위한 기능 태그(예: `#sentiment-analysis`, `#crypto-data`)를 추가합니다.
3.  **배포:** API 인벤토리를 나타내는 스마트 컨트랙트가 Avalanche에 배포됩니다.
4.  **수익:** 호출이 발생할 때마다 판매자의 지갑으로 암호화폐가 실시간 정산됩니다.

### 2.2 사용자 여정: AI 에이전트 (자율 구매자)
**목표:** 인간의 개입 없이 사용자 요청(예: "시장 심리 분석")을 수행합니다.

1.  **검색(Discovery):** 에이전트가 SDK를 통해 Apix 레지스트리 프로토콜(ARP)을 쿼리합니다: `find(tag="sentiment", price<=0.01 AVAX)`.
2.  **협상(Negotiation):** 에이전트가 평판과 가격을 기반으로 최적의 API를 선택합니다.
3.  **구매(Purchase - x402):**
    *   에이전트가 리소스를 요청합니다.
    *   `402 Payment Required` 챌린지를 수신합니다.
    *   온체인 결제 트랜잭션(TX)을 서명하고 전파합니다.
4.  **소비(Consumption):** 블록 확정 즉시 액세스 토큰/리다이렉트를 수신하고 데이터를 소비합니다.

---

## 3. Detailed Feature Specifications (상세 기능 사양)

### 3.1 마켓플레이스 플랫폼
기능성과 거래 모두에 최적화된 API를 위한 "앱 스토어"입니다.

*   **스마트 자산 리스팅:** 표준 HTTP 및 GraphQL API를 토큰화합니다.
*   **토큰 팩토리:** API 크레딧을 나타내는 액세스 토큰(ERC-1155 또는 커스텀 표준)을 자동 생성합니다.
*   **동적 가격 엔진:** 판매자는 선형 가격, 벌크 할인, 또는 수요 기반의 서지 프라이싱(Surge Pricing)을 설정할 수 있습니다.
*   **AI 레지스트리(SEO):** AI 에이전트의 시맨틱 검색을 위해 API 기능을 벡터 임베딩에 매핑하는 메타데이터 계층(JSON-LD)입니다.
*   **리셀러 마켓:** 사용자가 사용하지 않은 벌크 토큰을 온디맨드 사용자에게 재판매할 수 있는 2차 시장입니다.

### 3.2 대시보드 및 분석
*   **트래픽 인스펙터:** 요청, 성공률, 지연 시간 지표(p95, p99)에 대한 실시간 로그를 제공합니다.
*   **수익 허브:** 실시간 수익 추적, 인출 관리, 세금용 내보내기 도구(CSV)를 제공합니다.
*   **키 관리:** 키를 취소하거나 특정 지갑 주소를 차단할 수 있는 세밀한 제어 기능을 제공합니다.

---

## 4. Technical Architecture (기술 아키텍처)

### 4.1 고수준 시스템 설계
Apix는 속도와 보안을 보장하기 위해 하이브리드 Web2/Web3 아키텍처로 운영됩니다.

1.  **클라이언트(SDK):** x402 핸드셰이크 및 지갑 서명을 처리합니다 (JS/TS, Python, Go).
2.  **Apix 게이트웨이:** 고성능 리버스 프록시(Go/Node.js)입니다. 요청을 가로채고, 온체인 결제를 검증하며, 트래픽을 라우팅합니다.
3.  **Avalanche L1:** 가치 이전을 위한 고속 정산 레이어입니다.
4.  **검증 서비스(Verification Service):** 온체인 트랜잭션을 즉시 확인하는 인덱싱 레이어(The Graph/커스텀 노드)입니다.

### 4.2 "x402" 프로토콜 흐름
엄격한 검증 흐름을 통해 안전하고 허가 없는 접근을 보장합니다.

1.  **요청(Request):** 클라이언트가 `GET /api/v1/resource`를 요청합니다.
2.  **챌린지(Challenge - 402):** 게이트웨이가 유효한 토큰을 확인합니다. 없으면 `price`, `request_id`, `receiver_address`와 함께 `HTTP 402 Payment Required`를 반환합니다.
3.  **결제(Payment):** 클라이언트 SDK가 트랜잭션(TX)을 서명하고 Avalanche에 전파합니다.
4.  **검증(Verification):** 클라이언트가 `{tx_hash, request_id}`를 Apix 검증 엔드포인트로 전송합니다.
5.  **확인(Validation):** Apix 인덱서가 온체인에서 TX를 검증합니다(1-확정 또는 소액의 경우 0-확정).
6.  **접근(Access):** 게이트웨이가 임시 `Redirect URL` 또는 서명된 일회용 토큰을 발급하여 접근을 허용합니다.

### 4.3 기술 스택 추천

*   **블록체인:**
    *   **네트워크:** Avalanche C-Chain (MVP) -> 전용 서브넷 (프로덕션).
    *   **스마트 컨트랙트:** Solidity (Hardhat/Foundry).
*   **백엔드:**
    *   **게이트웨이:** 고동시성 프록싱을 위한 **Go (Golang)** 또는 **Node.js**.
    *   **데이터베이스:** PostgreSQL (메타데이터), Redis (속도 제한/Nonce).
    *   **인덱서:** The Graph 또는 커스텀 P-Chain 인덱서.
*   **프론트엔드:**
    *   **프레임워크:** SEO 및 성능을 위한 Next.js 14 (React).
    *   **지갑:** RainbowKit + Wagmi.
*   **AI 통합:**
    *   **SDK:** LangChain 에이전트 통합에 최적화된 Python SDK.

---

## 5. Monetization & Tokenomics (수익화 및 토큰노믹스)

**프로토콜 수수료 모델:**
1.  **거래 수수료:** x402 프로토콜을 통해 처리되는 모든 API 호출/토큰 판매에 대해 **2.5%의 고정 수수료** 부과.
2.  **리스팅 수수료:** 스팸을 방지하고 품질을 보장하기 위해 API 등록 시 소액의 AVAX 수수료 부과.
3.  **2차 로열티:** 2차 시장에서 리셀링 발생 시 원작자에게 표준 **5% 로열티** 제공.

**토큰 유틸리티 ($APIX - 향후 도입):**
*   **스테이킹:** 판매자가 검색 노출 순위를 높이기 위해 스테이킹.
*   **거버넌스:** 프로토콜 파라미터(수수료 등)에 대한 DAO 투표.
*   **인센티브:** 초기 채택자 및 고가용성 제공자에 대한 보상.

---

## 6. Risk Assessment (위험 평가)

| 위험 카테고리 | 잠재적 과제 | 완화 전략 |
| :--- | :--- | :--- |
| **지연 시간 (Latency)** | 블록체인 정산(1-2초)으로 인한 API 호출 지연. | **낙관적 검증(Optimistic Verification):** 소액 결제(<$0.10)의 경우 멤풀(0-확정)에서 TX 확인 즉시 접근 허용. |
| **가격 변동성** | AVAX 가격 변동에 따른 API 비용 불안정. | **스테이블코인 네이티브:** 오라클을 통해 USD로 가격을 책정하고, 정산은 USDC/USDT 또는 AVAX 환산액으로 처리. |
| **스팸/DDoS** | 검증 엔드포인트에 대한 플러딩 공격. | 속도 제한(Rate limiting), 무료 티어에 대한 PoW 챌린지, 서명된 요청 필수화. |
| **규제** | 마이크로페이먼트 및 국경 간 결제 규제(MiCA 등). | 비수탁(Non-custodial) 프로토콜로 설계; 판매자가 세금 준수 책임(Apix는 CSV 도구 제공). |

---

## 7. Implementation Timeline (구현 타임라인)

### 1단계: MVP (1-2개월)
*   **코어:** x402 게이트웨이(Go) 및 스마트 컨트랙트(Avalanche Fuji) 개발.
*   **SDK:** 헤더 기반 인증을 위한 기본 JS/TS 클라이언트 SDK 출시.
*   **UI:** URL 등록 및 가격 설정을 위한 간단한 판매자 대시보드.

### 2단계: 베타 (3-4개월)
*   **마켓플레이스:** 키워드 검색 기능을 갖춘 구매자 검색 UI 출시.
*   **기능:** 벌크 토큰 민팅 및 2차 리스팅 기능 구현.
*   **마일스톤:** 최초의 엔드투엔드 암호화폐 결제 API 호출 성공.

### 3단계: AI 및 최적화 (5-6개월)
*   **AI SDK:** LangChain 에이전트용 Python SDK 출시.
*   **최적화:** 200ms 미만 지연 시간을 위한 "낙관적 검증" 구현.
*   **감사:** 스마트 컨트랙트 보안 감사.
*   **출시:** 메인넷 공개 출시 (Public Launch).

### 4단계: 탈중앙화 (7개월 이후)
*   **인프라:** 가스비 최적화를 위해 전용 Apix 서브넷으로 마이그레이션.
*   **UX:** 더 부드러운 온보딩을 위해 계정 추상화(가스 없는 트랜잭션) 활성화.
